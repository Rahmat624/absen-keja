<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tabel Jadwal</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #f2f2f2; }
    td[contenteditable] { background-color: #fff8dc; }
    .btn { padding: 10px 15px; margin: 5px; cursor: pointer; border: none; border-radius: 5px; }
    .save { background-color: #4CAF50; color: white; }
    .reset { background-color: #f44336; color: white; }
    #tanggal { font-weight: bold; margin-bottom: 15px; }
  </style>
</head>
<body>

<h2>bagian : EMI RAHMAT</h2>
<div id="tanggal"></div>

<div id="tabel-container">
  <table id="jadwalTable">
    <thead>
      <tr>
        <th>No</th>
        <th>Nama</th>
        <th>Nomor Badge</th>
        <th>Pagi</th>
        <th>Siang</th>
        <th>Malam</th>
      </tr>
    </thead>
    <tbody>
    <tr>
          <td contenteditable="true">1</td>
          <td contenteditable="true">EMI RAHMAT</td>
          <td contenteditable="true">TUK  NG</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">2</td>
          <td contenteditable="true">SULAIMAN</td>
          <td contenteditable="true">HELPER</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
        <tr>
          <td contenteditable="true">3</td>
          <td contenteditable="true">HERON</td>
          <td contenteditable="true">TUKANG</td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
          <td contenteditable="true"></td>
        </tr>
  <tr>
    <td contenteditable="true">4</td>
    <td contenteditable="true">MIRWAN</td>
    <td contenteditable="true">TUKSNG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">5</td>
    <td contenteditable="true">BADRIN</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">6</td>
    <td contenteditable="true">SUDARLAN</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">7</td>
    <td contenteditable="true">ZULNALDI</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">8</td>
    <td contenteditable="true">ALIRIO</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">9</td>
    <td contenteditable="true">ISWAHTUDI</td>
    <td contenteditable="true">HELPER</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">10</td>
    <td contenteditable="true">IZAM</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">11</td>
    <td contenteditable="true">LA ABU</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">12</td>
    <td contenteditable="true">ABUBAKAR ALI</td>
    <td contenteditable="true">HELPER</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">13</td>
    <td contenteditable="true">SARFIN</td>
    <td contenteditable="true">HELPER</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">14</td>
    <td contenteditable="true">FADLI</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">15</td>
    <td contenteditable="true">AHMAD</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">16</td>
    <td contenteditable="true">UDIN LAODE HALIDIN</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">17</td>
    <td contenteditable="true">ALALUDIN ASURI</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">18</td>
    <td contenteditable="true">ZULFAHMI</td>
    <td contenteditable="true">HELPER</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">19</td>
    <td contenteditable="true">MUHAMAAD</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">20</td>
    <td contenteditable="true">ADNAN SAHID</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">21</td>
    <td contenteditable="true">ASYRAF</td>
    <td contenteditable="true">HELPER</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">22</td>
    <td contenteditable="true">LA RIUDI</td>
    <td contenteditable="true">TUKANG</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">23</td>
    <td contenteditable="true">OKLAN FADLI</td>
    <td contenteditable="true">HELPER</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">24</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">25</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">26</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">27</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">28</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">29</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
  <tr>
    <td contenteditable="true">30</td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
    <td contenteditable="true"></td>
  </tr>
    </tbody>
  </table>
</div>

<button class="btn save" onclick="simpanGambar()">Simpan Gambar</button>
<button class="btn reset" onclick="resetTabel()">Reset</button>
<button class="btn" style="background-color: #2196F3; color: white;" onclick="tambahBaris()">Tambah Baris</button>
<button class="btn" style="background-color: #ff9800; color: white;" onclick="hapusBaris()">Hapus Baris</button>
<button class="btn" style="background-color: #673AB7; color: white;" onclick="simpanKeLocal()">Simpan Data</button>
<button class="btn" style="background-color: #009688; color: white;" onclick="muatDariLocal()">Muat Data</button>


<script>
// Tambah baris ke tabel
function tambahBaris() {
  const tbody = document.querySelector("#jadwalTable tbody");
  const rowCount = tbody.rows.length + 1;
  const newRow = document.createElement("tr");

  for (let i = 0; i < 6; i++) {
    const cell = document.createElement("td");
    cell.contentEditable = "true";
    cell.innerText = i === 0 ? rowCount : "";
    newRow.appendChild(cell);
  }

  tbody.appendChild(newRow);
}
function hapusBaris() {
  const tbody = document.querySelector("#jadwalTable tbody");
  const rowCount = tbody.rows.length;
  if (rowCount > 0) {
    tbody.deleteRow(rowCount - 1);
  }
}
</script>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
  // Fungsi untuk menyimpan isi tabel ke Local Storage
function simpanKeLocal() {
  const rows = document.querySelectorAll("#jadwalTable tbody tr");
  const data = [];

  rows.forEach(row => {
    const rowData = [];
    for (let i = 0; i < 6; i++) {
      rowData.push(row.cells[i]?.innerText || "");
    }
    data.push(rowData);
  });
  tanggalElement.innerText = "Tanggal: " + tanggalSekarang;
  muatDariLocal();

  localStorage.setItem("dataJadwal", JSON.stringify(data));
  alert("Data berhasil disimpan!");
}

// Fungsi untuk memuat ulang data dari Local Storage ke tabel
function muatDariLocal() {
  const data = JSON.parse(localStorage.getItem("dataJadwal"));
  if (!data) {
    alert("Belum ada data tersimpan.");
    return;
  }

  const tbody = document.querySelector("#jadwalTable tbody");
  tbody.innerHTML = ""; // Kosongkan isi tabel

  data.forEach((rowData, index) => {
    const row = document.createElement("tr");
    rowData.forEach(cellText => {
      const cell = document.createElement("td");
      cell.contentEditable = "true";
      cell.innerText = cellText;
      row.appendChild(cell);
    });
    tbody.appendChild(row);
  });
}

  // Tampilkan tanggal dari HP
  const tanggalElement = document.getElementById("tanggal");
  const tanggalSekarang = new Date().toLocaleDateString('id-ID', {
    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
  });
  tanggalElement.innerText = "Tanggal: " + tanggalSekarang;

  // Fungsi simpan sebagai gambar
  function simpanGambar() {
  html2canvas(document.body).then(canvas => {
    const link = document.createElement("a");
    link.download = `Jadwal_${new Date().toISOString().slice(0, 10)}.png`;
    link.href = canvas.toDataURL();
    link.click();
  });
}
  // Fungsi reset hanya kolom Pagi, Siang, Malam
  function resetTabel() {
    const rows = document.querySelectorAll("#jadwalTable tbody tr");
    rows.forEach(row => {
      row.cells[3].innerText = "";
      row.cells[4].innerText = "";
      row.cells[5].innerText = "";
    });
  }
</script>

</body>
</html>
